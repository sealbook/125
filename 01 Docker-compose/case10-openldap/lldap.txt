version: '3'

volumes:
  lldap_data:
    driver: local

services:
  lldap:
    image: nitnelave/lldap:stable
    container_name: LLDAP
    ports:
      # For LDAP
      - "3890:3890"
      # For the web front-end
      - "17170:17170"
    volumes:
      - "./lldap_data:/data"
      # Alternatively, you can mount a local folder
    environment:
#      - UID=1000
#      - GID=1000
      - TZ=ASIA/TAIPEI
#      - LLDAP_JWT_SECRET=REPLACE_WITH_RANDOM
      - LLDAP_LDAP_USER_PASS=ITewsn1234
      - LLDAP_LDAP_BASE_DN=dc=infowize,dc=com,dc=tw

# admin username = admin 
# default password =password
# now_set=ITewsn1234
# or LLDAP_LDAP_USER_PASS setting
# LLDAP_JWT_SECRET = 用途 ?
# UID/GID 預設 1000/1000 用途 ?
# DB = sqlited <how to backup config ?>
# NAS connect FOR SAMBA share ?? < 免 AD >
# SSO ??? change password ???
###
###  Authelia || Authentik || Dex  || Emby || KeyCloak || Organizr
Ⅰ authelia
authelia 可對openldap/lldap/freeipa 連結，並透過web 形成SSO to webapp <web管理介面/服務| nextcloudt | webmail? | freenas{SMB} ? >
可替代 AD | LDAP | NIS ?
可提供對公網服務身份認證
https://hub.docker.com/r/authelia/authelia/tags
https://www.authelia.com/
Ⅱ Keycloak
用Keycloak學習身份驗證與授權
https://ithelp.ithome.com.tw/users/20112470/ironman/4324
https://www.keycloak.org/getting-started/getting-started-docker
https://hub.docker.com/r/jboss/keycloak/
https://github.com/keycloak/keycloak
Ⅲ authentik  
https://goauthentik.io/docs/
Ⅳ glauth

# 能集成 nas | share folder | smb ???
## 若是可以經由 webui 單一認證，是否可以成為freenas 本地用戶，即可以設定share folder 的 group/user ？？
## 可試試authentik | authelia | Keycloak | lemanldap 

## freeIPA | fedora 專用?? | 完整os?

## AD
## LDAP

## NIS lab建置完成,新增帳號/群組，再分組更新資料庫 
## /usr/lib/yp/ypinit -s nis
## /usr/lib/yp/ypinit -m
## nis.infowize.lab mapping 多個IP 當其中一個down，ypwhich 可自動切換
## freenas 若NIS user need ssh login，需多加 master.passwd.byname 
## python 產生新檔後，Makefile 更新資料庫，yptest 同步測試



以下是一些開源軟體，可以協助管理 FreeNAS 分享出來的 Samba：

Webmin：一個用於管理 Unix 系統的 Web 接口。它包括對 Samba 的支持，可以輕鬆地配置共享、用戶和權限。Webmin 可以透過 Samba 的 SWAT 接口與 Samba 進行通信，從而提供簡單易用的 Samba 管理工具。

Cockpit：一個 Web 界面，用於管理 Linux 伺服器。它可以輕鬆地配置 Samba 共享、用戶和權限，同時提供了一個直觀的介面。Cockpit 的 Samba 模塊支持 Samba 的最新版本，可以輕鬆地在 FreeNAS 上使用。

SWAT：Samba Web 管理工具，可以輕鬆地配置 Samba 共享、用戶和權限。它是 Samba 官方提供的管理工具之一，提供了一個直觀的 Web 介面，易於使用。

Samba Web Administration Tool (SWAT)：它是 Samba 官方提供的管理工具之一，提供了一個簡單易用的 Web 介面，可以輕鬆地配置 Samba 共享、用戶和權限。它可以在 FreeNAS 上輕鬆使用。

smbldap-tools：這是一個管理 Samba/LDAP 整合的工具。它可以幫助管理 Samba/LDAP 用戶、組、密碼等。它需要一些額外的設置才能在 FreeNAS 上運行，但對於需要使用 LDAP 的組織而言，它是一個非常有用的工具。

Winbind：這是一個 Samba 工具，用於將 Unix/Linux 系統與 Windows 域集成。它可以讓 FreeNAS 在 Windows 環境中使用，並與 Windows 域集成。在 FreeNAS 上使用 Winbind，需要一些額外的設置和管理。

這些開源工具可以提供一個易於使用和管理 Samba 的平台，協助管理 FreeNAS 分享出來的 Samba。選擇哪一個工具，取決於個人需要和使用情況。

